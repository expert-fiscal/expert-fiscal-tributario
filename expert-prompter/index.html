<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teleprompter PWA</title>
	<link rel="manifest" href="assets/js/manifest.json">
	
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <link rel="stylesheet" href="assets/css/style.css">

    <meta name="theme-color" content="#1a1a1a">
</head>
<body>

    <main id="scripts-list-view" class="view container py-4">
        <header class="d-flex justify-content-between align-items-center mb-4">
            <h1>Meus Roteiros</h1>
            <div>
                <button id="add-script-btn" class="btn btn-success"><i class="bi bi-plus-lg"></i> Novo</button>
                <button id="settings-btn" class="btn btn-secondary"><i class="bi bi-gear-fill"></i></button>
            </div>
        </header>
        <ul id="scripts-list" class="list-group">
            </ul>
    </main>

    <main id="script-editor-view" class="view d-none container py-4">
        <h1 id="editor-title">Novo Roteiro</h1>
        <form id="script-form">
            <input type="hidden" id="script-id">
            <div class="mb-3">
                <label for="tema" class="form-label">Tema</label>
                <input type="text" class="form-control" id="tema" required>
            </div>
            <div class="mb-3">
                <label for="problema" class="form-label">Problema (Gancho)</label>
                <textarea class="form-control" id="problema" rows="3"></textarea>
            </div>
            <div class="mb-3">
                <label for="solucao" class="form-label">Solução</label>
                <textarea class="form-control" id="solucao" rows="3"></textarea>
            </div>
            <div class="mb-3">
                <label for="promessa" class="form-label">Promessa</label>
                <textarea class="form-control" id="promessa" rows="3"></textarea>
            </div>
            <div class="mb-3">
                <label for="prova_cta" class="form-label">Prova / Chamada para Ação (CTA)</label>
                <textarea class="form-control" id="prova_cta" rows="3"></textarea>
            </div>
            <button type="submit" class="btn btn-primary w-100">Salvar Roteiro</button>
            <button type="button" id="cancel-edit-btn" class="btn btn-light w-100 mt-2">Cancelar</button>
        </form>
    </main>

    <main id="settings-view" class="view d-none container py-4">
        <h1>Configurações</h1>
        <div class="mb-3">
            <label for="scroll-speed" class="form-label">Velocidade de Rolagem (segundos)</label>
            <p class="text-muted">Tempo total para o texto percorrer a tela.</p>
            <input type="range" class="form-range" min="10" max="300" step="5" id="scroll-speed">
            <div class="text-center"><strong id="scroll-speed-value">120</strong> segundos</div>
        </div>
        <button id="save-settings-btn" class="btn btn-primary w-100">Salvar e Voltar</button>
    </main>
    
    <main id="teleprompter-view" class="view d-none">
        <video id="camera-feed" autoplay playsinline></video>
        <div id="text-overlay">
            <div id="scrolling-text"></div>
        </div>
        <div id="teleprompter-controls">
            <button id="start-scroll-btn" class="btn btn-light"><i class="bi bi-play-fill"></i> Iniciar</button>
            <button id="record-btn" class="btn btn-danger"><i class="bi bi-record-circle"></i> Gravar</button>
            <button id="back-to-list-btn" class="btn btn-secondary"><i class="bi bi-arrow-left"></i> Voltar</button>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
	<script>
		// Verifica se o navegador suporta Service Workers
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', () => {
				navigator.serviceWorker.register('/assets/js/service-worker.js')
					.then(registration => {
						console.log('Service Worker registrado com sucesso:', registration.scope);
					})
					.catch(error => {
						console.log('Falha no registro do Service Worker:', error);
					});
			});
		}
	</script>	
</body>
</html>